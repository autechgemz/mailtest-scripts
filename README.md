# mailtest-scripts

SMTP サーバーにメールを送信するスクリプトを 3 種類の方法で実装しています。それぞれのスクリプトは以下の技術を使用しており、同じ処理を異なる方法で実現しています：

1. **`mailtest.expect`**: `expect` スクリプトを使用。
2. **`mailtest.sh`**: 純粋なシェルスクリプトと `telnet` を使用。
3. **`mailtest.ts`**: `TypeScript スクリプトを使用。

これらのスクリプトを比較し、それぞれのメリット・デメリットをまとめてみました。

---

## 使い方

### 1. `mailtest.expect`
1. `expect` がインストールされていることを確認してください。
   ```bash
   sudo apt-get install expect
   ```
2. スクリプトを実行します。
   ```bash
   ./mailtest.expect
   ```

### 2. `mailtest.sh`
1. `telnet` がインストールされていることを確認してください。
   ```bash
   sudo apt-get install telnet
   ```
2. スクリプトに実行権限を付与します。
   ```bash
   chmod +x mailtest.sh
   ```
3. スクリプトを実行します。
   ```bash
   ./mailtest.sh
   ```

### 3. `mailtest.ts`
1. `typescript`や`Node.js`がインストールされていることを確認してください。ここでは、`bun` がインストールされていることを前提とします。
   ```bash
   curl -fsSL https://bun.sh/install | bash
   ```
2. 必要な依存関係をインストールします。
   ```bash
   bun install
   ```
3. スクリプトを実行します。
   ```bash
   bun run mailtest.ts
   ```

---

## 比較: メリットとデメリット

| 方法                  | メリット                                                                  | デメリット                                                                 |
|-----------------------|---------------------------------------------------------------------------|----------------------------------------------------------------------------|
| **`mailtest.expect`** | - 対話的なプロセス制御が簡単<br>- `telnet` の応答を待つ処理が簡潔に書ける | - `expect` のインストールが必要<br>- 他の言語や環境への移植性が低い        |
| **`mailtest.sh`**     | - シンプルで依存関係が少ない<br>- 標準的なシェル環境で動作する            | - 応答待ちの処理が手動で必要<br>- エラーハンドリングが複雑になる場合がある |
| **`mailtest.ts`**     | - モダンな非同期処理が可能<br>- 型安全で保守性が高い<br>- 高速な実行環境  | - `typescript`や`Node.js` のインストールが必要<br>- シェル環境に比べてセットアップが複雑     |

---

## 結論

- **`mailtest.expect`** は、対話的なプロセス制御が必要な場合に適していますが、移植性が低い点が課題です。
- **`mailtest.sh`** は、シンプルで依存関係が少ないため、軽量な環境での使用に適しています。ただし、応答待ちやエラーハンドリングが手動で必要です。
- **`mailtest.ts`** は、モダンな開発環境に適しており、保守性や拡張性が高いですが、セットアップがやや複雑です。

---

